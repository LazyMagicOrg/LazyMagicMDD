  __AppSyncEventsApiName__:
    # Generated by __ResourceGenerator__ from __TemplateSource__
    Type: AWS::AppSync::EventAPI
    Properties:
      Name: !Sub "${AWS::StackName}-__AppSyncEventsApiName__"
      EventConfig:
        ConnectionAuthModes:
          - AuthType: AWS_IAM
#CognitoAuth#
        DefaultPublishAuthModes:
          - AuthType: AWS_IAM
        DefaultSubscribeAuthModes:
          - AuthType: AWS_IAM
      LogConfig:
        CloudWatchLogsRoleArn: !GetAtt __AppSyncEventsApiName__LogRole.Arn
        FieldLogLevel: ALL
      Tags:
        - Key: Environment
          Value: !Ref EnvironmentParameter
        - Key: Service
          Value: __AppSyncEventsApiName__

  __AppSyncEventsApiName__LogRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: !Sub "${AWS::StackName}-__AppSyncEventsApiName__-LogRole"
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Principal:
              Service: appsync.amazonaws.com
            Action: sts:AssumeRole
      Policies:
        - PolicyName: AppSyncCloudWatchLogsPolicy
          PolicyDocument:
            Version: '2012-10-17'
            Statement:
              - Effect: Allow
                Action:
                  - logs:CreateLogGroup
                  - logs:CreateLogStream
                  - logs:PutLogEvents
                Resource: !Sub "arn:aws:logs:${AWS::Region}:${AWS::AccountId}:log-group:/aws/appsync/*"

  __AppSyncEventsApiName__PublishRole:
    Type: AWS::IAM::Role
    Properties:
      RoleName: !Sub "${AWS::StackName}-__AppSyncEventsApiName__-PublishRole"
      AssumeRolePolicyDocument:
        Version: '2012-10-17'
        Statement:
          - Effect: Allow
            Principal:
              AWS: !Sub "arn:aws:iam::${AWS::AccountId}:root"
            Action: sts:AssumeRole
      Policies:
        - PolicyName: AppSyncEventsPublishPolicy
          PolicyDocument:
            Version: '2012-10-17'
            Statement:
              - Effect: Allow
                Action:
                  - appsync:EventPublish
                Resource: !Sub "${__AppSyncEventsApiName__}/*"